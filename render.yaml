services:
  - name: predicta-api
    type: web
    env: python
    region: frankfurt
    plan: free
    branch: main
    pythonVersion: 3.11

    buildCommand: |
      pip install --upgrade pip wheel setuptools cython
      pip install scikit-learn==1.5.2
      pip install -r requirements.txt

    # ðŸ”¹ DÃœZELTME: main_weighted.py kÃ¶k dizinde, web klasÃ¶rÃ¼nde deÄŸil
    startCommand: uvicorn main_weighted:app --host 0.0.0.0 --port $PORT

    envVars:
      - key: PYTHONUNBUFFERED
        value: "1"
      - key: MODEL_PATH
        value: models/weighted_model.pkl
      - key: SCALER_PATH
        value: models/weighted_scaler.pkl
      - key: METADATA_PATH
        value: models/weighted_model_metadata.json
      - key: DATA_PATH
        value: data/merged_all.csv
      - key: PORT
        value: 8000

    healthCheckPath: /api/status
    autoDeploy: true
